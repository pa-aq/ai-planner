<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      引入百度地图api的js文件
    -->
    
    <script>
      // 增强版百度地图导航函数（支持多种出行方式）
      window.navigateWithBaidu = function(name, lat, lng, mode = 'driving') {
        try {
          // 导航模式映射
          const modeMap = {
            driving: '驾车',
            transit: '公交',
            walking: '步行',
            riding: '骑行'
          };
          
          // 百度地图App URL Scheme
          const appUrl = `baidumap://map/direction?destination=name:${encodeURIComponent(name)}|latlng:${lat},${lng}&mode=${mode}&coord_type=gcj02&src=webapp.trip.planner`;
          
          // 百度地图网页版URL
          const webUrl = `https://api.map.baidu.com/direction?destination=${lat},${lng}&mode=${mode}&output=html&src=webapp.trip.planner`;
          
          // console.log(`开始${modeMap[mode]}导航到: ${name}`);
          
          // 尝试打开App
          window.location.href = appUrl;
          
          // 检测是否成功打开App
          let appOpened = false;
          const timer = setTimeout(() => {
            if (!appOpened && !document.hidden) {
              window.open(webUrl, '_blank');
            }
          }, 500);
          
          // 监听页面可见性变化
          document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
              appOpened = true;
              clearTimeout(timer);
            }
          });
          
        } catch (error) {
          console.error('百度地图导航失败:', error);
          // 降级到网页版
          const webUrl = `https://api.map.baidu.com/direction?destination=${lat},${lng}&mode=driving&output=html`;
          window.open(webUrl, '_blank');
        }
      };
      </script>
      <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
